"use strict";(self.webpackChunkbluedot_docs=self.webpackChunkbluedot_docs||[]).push([[335],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=a.createContext({}),s=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(d.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,d=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=s(n),m=o,g=c["".concat(d,".").concat(m)]||c[m]||u[m]||r;return n?a.createElement(g,i(i({ref:t},p),{},{components:n})):a.createElement(g,i({ref:t},p))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[c]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6567:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var a=n(7462),o=(n(7294),n(3905));const r={},i="Tempo",l={unversionedId:"Point SDK/Flutter/Tempo",id:"Point SDK/Flutter/Tempo",title:"Tempo",description:"Tempo allows active tracking of a user\u2019s location, as well as live ETA estimation.",source:"@site/docs/Point SDK/Flutter/Tempo.md",sourceDirName:"Point SDK/Flutter",slug:"/Point SDK/Flutter/Tempo",permalink:"/Point SDK/Flutter/Tempo",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Geo-triggering",permalink:"/Point SDK/Flutter/Geo-triggering"},next:{title:"Features",permalink:"/Point SDK/Flutter/Features"}},d={},s=[{value:"Start Tempo",id:"start-tempo",level:2},{value:"For Android a foreground service notification is also required.",id:"for-android-a-foreground-service-notification-is-also-required",level:3},{value:"Receiving Tempo events",id:"receiving-tempo-events",level:2},{value:"Stop Tempo",id:"stop-tempo",level:2},{value:"Tempo Status",id:"tempo-status",level:2},{value:"Example",id:"example",level:2}],p={toc:s},c="wrapper";function u(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"tempo"},"Tempo"),(0,o.kt)("p",null,"Tempo allows active tracking of a user\u2019s location, as well as live ETA estimation."),(0,o.kt)("h2",{id:"start-tempo"},"Start Tempo"),(0,o.kt)("p",null,"For this capability, the SDK needs to be initialized and the app must have location permission. You also need Tempo to be enabled for your Bluedot Account and can see the Tempo section in the Projects List page of your Canvas account. If that is not visible and you want to use this capability, please contact your Bluedot CX representative."),(0,o.kt)("h3",{id:"for-android-a-foreground-service-notification-is-also-required"},"For Android a ",(0,o.kt)("a",{parentName:"h3",href:"/Point%20SDK/Android/Location%20Permission%20&%20Notifications%20Best%20Practices"},"foreground service notification")," is also required."),(0,o.kt)("p",null,"Tempo also requires Destination IDs to be defined, which ",(0,o.kt)("a",{parentName:"p",href:"/Tempo/Create%20your%20destinations"},"you can learn about here"),"."),(0,o.kt)("p",null,"To start tempo on foreground mode, you have to set notification details as below."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Parameter")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Type")),(0,o.kt)("th",{parentName:"tr",align:null},(0,o.kt)("strong",{parentName:"th"},"Description")))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"channelId")),(0,o.kt)("td",{parentName:"tr",align:null},"String?"),(0,o.kt)("td",{parentName:"tr",align:null},"The channel id of the notification..")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"channelName")),(0,o.kt)("td",{parentName:"tr",align:null},"String?"),(0,o.kt)("td",{parentName:"tr",align:null},"The channel name of the notification.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"androidNotificationTitle")),(0,o.kt)("td",{parentName:"tr",align:null},"String?"),(0,o.kt)("td",{parentName:"tr",align:null},"The title of the notification.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"androidNotificationContent")),(0,o.kt)("td",{parentName:"tr",align:null},"String?"),(0,o.kt)("td",{parentName:"tr",align:null},"The content of the notification.")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"androidNotificationId")),(0,o.kt)("td",{parentName:"tr",align:null},"Int?"),(0,o.kt)("td",{parentName:"tr",align:null},"The notification Id of the notification.")))),(0,o.kt)("p",null,"And start Tempo by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"TempoBuilder")," \xa0class as below:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"String destinationId = 'Your destination Id';String channelId = 'Your channel Id';\nString channelName = 'Your channel Name';\nString androidNotificationTitle = 'Your notification title';\nString androidNotificationContent = 'Your notification content';\nint androidNotificationId = 123; // Will be -1 by default if set to null. BluedotPointSdk.instance.tempoBuilder() \n.androidNotification(channelId, channelName, androidNotificationTitle, androidNotificationContent, androidNotificationId) \n.start(destinationId).then((value) { \n  // Successfully started tempo tracking \n  debugPrint('Tempo has been started successfully'); \n}).catchError((error) { \n  // Failed to start tempo tracking, handle error here \n  debugPrint('Failed to start tempo. Error $error'); \n});\n")),(0,o.kt)("h2",{id:"receiving-tempo-events"},"Receiving Tempo events"),(0,o.kt)("p",null,"The Tempo service does not issue events under normal operation. Instead, it only issues events if there is an error with the operation. Tracking events are instead delivered via webhook, as configured in the Canvas UI."),(0,o.kt)("p",null,"You can listen to receive the Tempo events\xa0as below."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"const tempoEventChannel = MethodChannel(BluedotPointSdk.tempo);\ntempoEventChannel.setMethodCallHandler((MethodCall call) async {\n  var args = call.arguments;\n  switch (call.method) {\n    case TempoEvents.tempoTrackingStoppedWithError:\n      // Handler error\n      break;\n    default:\n      break;\n  }\n});\n")),(0,o.kt)("p",null,"To see the full list of supported events please refer to ",(0,o.kt)("a",{parentName:"p",href:"/Point%20SDK/Flutter/Events%20List"},"Flutter Events List.")),(0,o.kt)("h2",{id:"stop-tempo"},"Stop Tempo"),(0,o.kt)("p",null,"Once the Tempo service is no longer needed, you can stop the service."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"BluedotPointSdk.instance.stopTempoTracking().then((value) {\n  // Successfully stopped tempo tracking\n  debugPrint('Tempo has been stopped');\n}).catchError((error) {\n  // Failed to stop tempo tracking, handle error here\n  debugPrint('Failed to stop tempo tracking. Error $error');\n});\n")),(0,o.kt)("h2",{id:"tempo-status"},"Tempo Status"),(0,o.kt)("p",null,"You can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"isTempoRunning")," method to check the status of the Tempo service. It will return a boolean value."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"BluedotPointSdk.instance.isTempoRunning().then((value) {\n  debugPrint('Is Tempo Running: $value');\n});\n")),(0,o.kt)("h2",{id:"example"},"Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-dart"},"import 'package:bluedot_point_sdk/bluedot_point_sdk.dart';\nimport 'package:flutter/material.dart';\nimport 'package:flutter/services.dart';\n\nclass TempoPage extends StatefulWidget {\n  const TempoPage({Key? key}) : super(key: key);\n\n  @override\n  State<TempoPage> createState() => _TempoPageState();\n}\n\nclass _TempoPageState extends State<TempoPage> {\n  bool _isTempoRunning = false;\n\n  /// Start tempo tracking\n  void _startTempo() {\n      String destinationId = 'Your destination Id';\n      String channelId = 'Your channel Id';\n      String channelName = 'Your channel Name';\n      String androidNotificationTitle = 'Your notification title';\n      String androidNotificationContent = 'Your notification content';\n      int androidNotificationId = 123; // Will be -1 by default if set to null. // Set custom event metadata.\n      // We suggest to set the Custom Event Meta Data before starting GeoTriggering or Tempo.\n      var metadata = {\n        'hs_orderId': 'Order Id',\n        'hs_Customer Name': 'Customer Name'\n      };\n\n      BluedotPointSdk.instance.setCustomEventMetaData(metadata);\n\n      BluedotPointSdk.instance\n          .tempoBuilder()\n          .androidNotification(channelId, channelName, androidNotificationTitle,\n          androidNotificationContent, androidNotificationId)\n          .start(destinationId)\n          .then((value) {\n        // Successfully started tempo tracking\n        debugPrint('Tempo has been started successfully');\n      }).catchError((error) {\n        // Failed to start tempo tracking, handle error here\n        debugPrint('Failed to start tempo. Error $error');\n      });\n  }\n\n  /// Stop tempo tracking\n  void _stopTempo() {\n    BluedotPointSdk.instance.stopTempoTracking().then((value) {\n      // Successfully stopped tempo tracking\n      debugPrint('Tempo has been stopped');\n    }).catchError((error) {\n      // Failed to stop tempo tracking, handle error here\n      debugPrint('Failed to stop tempo tracking. Error $error');\n    });\n  }\n\n  void _updateTempoStatus() {\n    BluedotPointSdk.instance.isTempoRunning().then((value) {\n      setState(() {\n        _isTempoRunning = value;\n      });\n    });\n  }\n\n  @override\n  void initState() {\n    super.initState();\n    // Listen to tempo events\n    const tempoEventChannel = MethodChannel(BluedotPointSdk.tempo);\n    tempoEventChannel.setMethodCallHandler((MethodCall call) async {\n      var args = call.arguments;\n      switch (call.method) {\n        case TempoEvents.tempoTrackingStoppedWithError:\n          // Handler error\n          debugPrint('Tempo Tracking Stopped With Error. Error $args');\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Column(\n      children: [\n        Text('Is Tempo Running: $_isTempoRunning'),\n        ElevatedButton(onPressed: _startTempo, child: const Text('Start Tempo')),\n        ElevatedButton(onPressed: _stopTempo, child: const Text('Stop Tempo')),\n        ElevatedButton(onPressed: _updateTempoStatus, child: const Text('Update Tempo Status')),\n      ],\n    );\n  }\n}\n")))}u.isMDXComponent=!0}}]);