"use strict";(self.webpackChunkdocs_test=self.webpackChunkdocs_test||[]).push([[8660],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>m});var a=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){if(null==e)return{};var o,a,n=function(e,t){if(null==e)return{};var o,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)o=i[a],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=a.createContext({}),l=function(e){var t=a.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},u=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=l(o),h=n,m=p["".concat(s,".").concat(h)]||p[h]||d[h]||i;return o?a.createElement(m,r(r({ref:t},u),{},{components:o})):a.createElement(m,r({ref:t},u))}));function m(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=o.length,r=new Array(i);r[0]=h;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[p]="string"==typeof e?e:n,r[1]=c;for(var l=2;l<i;l++)r[l]=o[l];return a.createElement.apply(null,r)}return a.createElement.apply(null,o)}h.displayName="MDXCreateElement"},7368:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var a=o(7462),n=(o(7294),o(3905));const i={},r="Location Permission best practices",c={unversionedId:"Point SDK/iOS/Location Permission Best Practices",id:"Point SDK/iOS/Location Permission Best Practices",title:"Location Permission best practices",description:"There are certain approaches that Bluedot has found work best to achieve maximum value from your geolocation SDK when working with iOS location permissions.",source:"@site/docs/Point SDK/iOS/Location Permission Best Practices.md",sourceDirName:"Point SDK/iOS",slug:"/Point SDK/iOS/Location Permission Best Practices",permalink:"/documentation/Point SDK/iOS/Location Permission Best Practices",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Enhanced SDK restart",permalink:"/documentation/Point SDK/iOS/Features/Enhanced SDK restart"},next:{title:"Migration guide from previous versions to Point SDK v15.4.0",permalink:"/documentation/Point SDK/iOS/Migration Guides/Migration guide from previous versions to Point SDK v15.4.0"}},s={},l=[{value:"Convince user of the value",id:"convince-user-of-the-value",level:2},{value:"Requesting for location permission",id:"requesting-for-location-permission",level:2},{value:"Engage location services only when necessary",id:"engage-location-services-only-when-necessary",level:2},{value:"Use background location usage indicator for high-value use cases",id:"use-background-location-usage-indicator-for-high-value-use-cases",level:2},{value:"iOS 14 \u2013 Precise Location Accuracy",id:"ios-14--precise-location-accuracy",level:2}],u={toc:l},p="wrapper";function d(e){let{components:t,...i}=e;return(0,n.kt)(p,(0,a.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"location-permission-best-practices"},"Location Permission best practices"),(0,n.kt)("p",null,"There are certain approaches that Bluedot has found work best to achieve maximum value from your geolocation SDK when working with iOS location permissions."),(0,n.kt)("h2",{id:"convince-user-of-the-value"},"Convince user of the value"),(0,n.kt)("p",null,"Rather than prompting the user with a location permission prompt at some unexpected time, it\u2019s instead recommended that you display in your UI an explanation of why location is required and what value it will give the user. This varies from app to app depending on its usage, but we\u2019ve reliably seen double or more uptake in location usage when an appropriate justification is given."),(0,n.kt)("p",null,(0,n.kt)("img",{src:o(3820).Z,width:"414",height:"896"})),(0,n.kt)("h2",{id:"requesting-for-location-permission"},"Requesting for location permission"),(0,n.kt)("p",null,"To increase the uptake of location permission, it is also recommended initially to request for \u201c",(0,n.kt)("em",{parentName:"p"},"when in use"),"\u201d permission:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-swift"},"BDLocationManager.instance()?.requestWhenInUseAuthorization()\n")),(0,n.kt)("h2",{id:""},(0,n.kt)("img",{src:o(6880).Z,width:"428",height:"848"})),(0,n.kt)("p",null,"Then later at an appropriate moment within your app, upgrade to \u201c",(0,n.kt)("em",{parentName:"p"},"always"),"\u201d permission via the following API:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-swift"},"BDLocationManager.instance()?.requestAlwaysAuthorization()\n")),(0,n.kt)("p",null,(0,n.kt)("img",{src:o(2249).Z,width:"428",height:"526"})),(0,n.kt)("h2",{id:"engage-location-services-only-when-necessary"},"Engage location services only when necessary"),(0,n.kt)("p",null,"Both geo-triggering and Tempo tracking are powerful tools and can be used for a variety of use cases. Bluedot has worked hard to ensure that its location capabilities are as efficient as possible, however, location always causes at least some level of battery drain, so you\u2019re encouraged to only turn on location capabilities when necessary for your business logic."),(0,n.kt)("h2",{id:"use-background-location-usage-indicator-for-high-value-use-cases"},"Use background location usage indicator for high-value use cases"),(0,n.kt)("p",null,"For some use cases, particularly when the value of allowing access to location data is communicated to the customer, it may be permissible to access location data while the app is in the background and only ",(0,n.kt)("em",{parentName:"p"},"While using the app")," location authorization has been granted. The background location usage indicator alerts the user that an app is accessing their location from the background without being granted ",(0,n.kt)("em",{parentName:"p"},"Always")," authorization. Utilizing the background location usage indicator allows the Bluedot SDK to operate from the background as though the app was in active use."),(0,n.kt)("p",null,"See our guide to ",(0,n.kt)("a",{parentName:"p",href:"/documentation/Point%20SDK/iOS/Features/Blue%20bar"},"enabling the background location usage indicator"),"."),(0,n.kt)("h2",{id:"ios-14--precise-location-accuracy"},"iOS 14 \u2013 Precise Location Accuracy"),(0,n.kt)("p",null,"If your app doesn\u2019t have precise location accuracy (accuracy authorization at a reduced level), you can make the following call via ",(0,n.kt)("inlineCode",{parentName:"p"},"BDLocationManager"),", to request for Temporary Full Accuracy Authorization."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-swift"},'BDLocationManager.instance()?.requestTemporaryFullAccuracyAuthorization(withPurposeKey: "Your Purpose Key")\n')),(0,n.kt)("p",null,"In addition, you can implement ",(0,n.kt)("a",{parentName:"p",href:"https://ios-docs.bluedot.io/Protocols/BDPBluedotServiceDelegate.html"},(0,n.kt)("inlineCode",{parentName:"a"},"BDPBluedotServiceDelegate")),"\xa0and register it with BDLocationManager to receive Bluedot Service\xa0related callbacks."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-swift"},"func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n    BDLocationManager.instance()?.bluedotServiceDelegate = self\n}\n")),(0,n.kt)("p",null,"Then, implement the ",(0,n.kt)("a",{parentName:"p",href:"https://ios-docs.bluedot.io/Protocols/BDPBluedotServiceDelegate.html#/c:objc(pl)BDPBluedotServiceDelegate(im)accuracyAuthorizationDidChangeFromPreviousAuthorization:toNewAuthorization:"},(0,n.kt)("inlineCode",{parentName:"a"},"accuracyAuthorizationDidChange")),"\xa0protocol method, and receive callbacks on changes to Location Accuracy Authorization."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-swift"},'func accuracyAuthorizationDidChange(fromPreviousAuthorization previousAccuracyAuthorization: CLAccuracyAuthorization, toNewAuthorization newAccuracyAuthorization: CLAccuracyAuthorization) {\n\xa0 \xa0 print("Previous location accuracy authorization is \\(previousAccuracyAuthorization)")\n\xa0 \xa0 print("Current location accuracy authorization is \\(newAccuracyAuthorization)") \n}\n')))}d.isMDXComponent=!0},3820:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/iOS-Location-Permission-onboarding-e14dc6029771fa44e1da84c7d273a534.png"},2249:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/iPhone_11_Pro_Max_\u2013_14_2-1-f88dd18080bbe421a3a2c275263a0864.jpg"},6880:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/iPhone_11_Pro_Max_\u2013_14_2-5db466d1ff589c2b5846e3e3d6d8e561.jpg"}}]);