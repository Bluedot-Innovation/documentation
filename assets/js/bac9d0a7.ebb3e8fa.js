"use strict";(self.webpackChunkbluedot_docs=self.webpackChunkbluedot_docs||[]).push([[9224],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>f});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),c=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=c(e.components);return o.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||i;return n?o.createElement(f,a(a({ref:t},s),{},{components:n})):o.createElement(f,a({ref:t},s))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:r,a[1]=l;for(var c=2;c<i;c++)a[c]=n[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3023:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var o=n(7462),r=(n(7294),n(3905));const i={},a="Tempo",l={unversionedId:"Point SDK/Android/Tempo",id:"Point SDK/Android/Tempo",title:"Tempo",description:"Tempo allows active tracking of a user\u2019s location, as well as live ETA estimation.",source:"@site/docs/Point SDK/Android/Tempo.md",sourceDirName:"Point SDK/Android",slug:"/Point SDK/Android/Tempo",permalink:"/Point SDK/Android/Tempo",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Geo-triggering",permalink:"/Point SDK/Android/Geo-triggering"},next:{title:"Enable or disable Zones",permalink:"/Point SDK/Android/Features/Enable or disable zones"}},p={},c=[{value:"Start Tempo",id:"start-tempo",level:2},{value:"Receiving Tempo events",id:"receiving-tempo-events",level:2},{value:"Stop Tempo",id:"stop-tempo",level:2}],s={toc:c},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"tempo"},"Tempo"),(0,r.kt)("p",null,"Tempo allows active tracking of a user\u2019s location, as well as live ETA estimation."),(0,r.kt)("h2",{id:"start-tempo"},"Start Tempo"),(0,r.kt)("p",null,"For this capability, the SDK needs to be initialized and the app must have location permission. You also need Tempo to be enabled for your Bluedot Account and can see the Tempo section in the Projects List page of your Canvas account. If that is not visible and you want to use this capability, please contact your Bluedot CX representative. A foreground service notification is also required."),(0,r.kt)("p",null,"Tempo also requires Destination IDs to be defined, which ",(0,r.kt)("a",{parentName:"p",href:"/Tempo/Create%20your%20destinations"},"you can learn about here"),"."),(0,r.kt)("p",null,"To start Tempo, you should"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'if (ServiceManager.getInstance(context).isBluedotServiceInitialized()) {\n    // The Bluedot SDK is initialized, you can start Tempo.\n    \n    TempoService.builder()\n        .notificationId(myNotificationId)\n        .notification(notificationReference)\n        .destinationId("myDestinationId")\n        .start(myApplicationContext, // This context should be the Application context\n            (error) -> {\n                if (error != null) {\n                    // An error has occurred while starting Tempo.\n                } else {\n                    // Tempo has started successfully.\n                }\n            })\n} else {\n    // The Bluedot SDK is not initialized. Initialize before starting Tempo\n}\n')),(0,r.kt)("h2",{id:"receiving-tempo-events"},"Receiving Tempo events"),(0,r.kt)("p",null,"The Tempo service emits ",(0,r.kt)("a",{parentName:"p",href:"https://android-docs.bluedot.io/-bluedot%20-s-d-k%20-docs/au.com.bluedot.point.net.engine.event/-tempo-tracking-update/index.html"},"TempoTrackingUpdate")," which are tracking events with eta, etaDirection and ",(0,r.kt)("a",{parentName:"p",href:"https://android-docs.bluedot.io/-bluedot%20-s-d-k%20-docs/au.com.bluedot.ruleEngine.model.rule/-destination/index.html"},"destination")," of the Tempo enabled store.\nTo receive the TempoUpdateEvents and any Errors during the operation. You must extend\n",(0,r.kt)("a",{parentName:"p",href:"https://android-docs.bluedot.io/-bluedot%20-s-d-k%20-docs/au.com.bluedot.point.net.engine/-tempo-tracking-receiver/index.html"},"TempoTrackingReceiver")," Receiver and override below functions."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"class ExampleTempoReceiver : TempoTrackingReceiver() {\n\n   // Called with every tempotrackingUpdate received by device from backend with TempoTrackingUpdate\n    override fun onTempoTrackingUpdate(tempoTrackingUpdate: TempoTrackingUpdate, context: Context) {\n      // TempoTrackingUpdate class with eta, etaDirection and destination\n    }\n\n\xa0 \xa0 // Called when there is an error that has caused Tempo to stop\n\xa0 \xa0 override fun tempoStoppedWithError(error: BDError, context: Context) {\n\xa0 \xa0 \xa0 \xa0 //error during Tempo \xa0 \xa0 }\n }\n")),(0,r.kt)("p",null,"The receiver must be registered in the app's manifest:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:'title="AndroidManifest"',title:'"AndroidManifest"'},'<application android:label="@string/app_name" \\>\n\xa0 \xa0 <receiver\n \xa0 \xa0\xa0 \xa0 android:name="my.package.ExampleTempoReceiver"\n \xa0 \xa0\xa0 \xa0 android:enabled="true"\n \xa0 \xa0\xa0 \xa0 android:exported="false"\n \xa0 \xa0 >\n \xa0 \xa0\xa0 \xa0 <intent-filter>\n \xa0 \xa0\xa0 \xa0\xa0 \xa0 <action android:name="io.bluedot.point.TEMPO" />\n \xa0 \xa0\xa0 \xa0 </intent-filter>\n \xa0 \xa0 </receiver>\n </application>\n')),(0,r.kt)("h2",{id:"stop-tempo"},"Stop Tempo"),(0,r.kt)("p",null,"Once the Tempo service is no longer needed, you can stop the service."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"val tempoStopError: BDError? = TempoService.stop(myContext)\nif (tempoStopError != null) {\n    // An error occurred, the SDK or Tempo may not have been initialized correctly.\n}\n")))}u.isMDXComponent=!0}}]);