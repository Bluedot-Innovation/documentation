"use strict";(self.webpackChunkbluedot_docs=self.webpackChunkbluedot_docs||[]).push([[7970],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,c=d["".concat(s,".").concat(m)]||d[m]||h[m]||i;return n?a.createElement(c,o(o({ref:t},p),{},{components:n})):a.createElement(c,o({ref:t},p))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},90657:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var a=n(87462),r=(n(67294),n(3905));const i={},o="Integrate Wave API",l={unversionedId:"APIs/Wave API/Integrate Wave API",id:"APIs/Wave API/Integrate Wave API",title:"Integrate Wave API",description:"Overview",source:"@site/docs/APIs/Wave API/Integrate Wave API.md",sourceDirName:"APIs/Wave API",slug:"/APIs/Wave API/Integrate Wave API",permalink:"/APIs/Wave API/Integrate Wave API",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Wave: Integration & User guide",permalink:"/APIs/Wave API/Overview"},next:{title:"Receiving Wave API events",permalink:"/APIs/Wave API/Receiving Wave API events"}},s={},u=[{value:"Overview",id:"overview",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"API reference",id:"api-reference",level:2},{value:"Wave Request Example",id:"wave-request-example",level:2},{value:"Request Signature",id:"request-signature",level:3},{value:"Request Payload",id:"request-payload",level:3},{value:"Simple Example",id:"simple-example",level:4},{value:"Enriched Data Example",id:"enriched-data-example",level:4},{value:"Using Wave API with Hello Screens",id:"using-wave-api-with-hello-screens",level:2},{value:"Updating the order\u2019s state in Hello Screens",id:"updating-the-orders-state-in-hello-screens",level:3},{value:"Integrate Wave in your Web page using the Web SDK",id:"integrate-wave-in-your-web-page-using-the-web-sdk",level:2}],p={toc:u},d="wrapper";function h(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"integrate-wave-api"},"Integrate Wave API"),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"During API integration, there are 3 important stages that align with your customer\u2019s experience."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Set the ",(0,r.kt)("inlineCode",{parentName:"li"},"Custom Event Metadata")," to be attached with each Wave Event \u2013 this is usually at least the customer\u2019s name and orderID."),(0,r.kt)("li",{parentName:"ol"},"Define the ",(0,r.kt)("inlineCode",{parentName:"li"},"DestinationId")," \u2013 this is where the customer is collecting their order. You can use anything, but we recommend using the normal Store Number or Restaurant ID."),(0,r.kt)("li",{parentName:"ol"},"Define an Arrival callout (I\u2019m here button) in the web page or app and set it up to submit a Wave API request when the callout")),(0,r.kt)("h2",{id:"endpoints"},"Endpoints"),(0,r.kt)("p",null,"Wave API is hosted in multiple regions worldwide to ensure the better performance of our services. Each region is completely independent and in a separated geographic area."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Region")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Wave API URL")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"APAC"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://au1-events.bluedot.io/wave"},"https://au1-events.bluedot.io/wave"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"EUROPE"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://eu1-events.bluedot.io/wave"},"https://eu1-events.bluedot.io/wave"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"NORTH AMERICA"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://us1-events.bluedot.io/wave"},"https://us1-events.bluedot.io/wave"))))),(0,r.kt)("p",null,"If you\u2019re not sure which region your account is in, please contact us at ",(0,r.kt)("a",{parentName:"p",href:"mailto:help@bluedot.io"},"help@bluedot.io"),"."),(0,r.kt)("h2",{id:"api-reference"},"API reference"),(0,r.kt)("p",null,"The API specification for Wave API can be found\xa0",(0,r.kt)("a",{parentName:"p",href:"https://events-docs.bluedot.io/#operation/postWaveEvents"},"here"),"."),(0,r.kt)("h2",{id:"wave-request-example"},"Wave Request Example"),(0,r.kt)("p",null,"To send a Wave event you\u2019ll need to make a POST request to the Wave endpoint. It only requires to sign the request with the ",(0,r.kt)("inlineCode",{parentName:"p"},"projectId")," and include the ",(0,r.kt)("inlineCode",{parentName:"p"},"destinationId")," that it\u2019s effectively the Zone the user has arrived."),(0,r.kt)("p",null,"You can also add context to the Wave Event, such as the user\u2019s location, the event\u2019s time, and other properties that can help you better understand your user\u2019s behaviour."),(0,r.kt)("h3",{id:"request-signature"},"Request Signature"),(0,r.kt)("p",null,"Wave API uses the ",(0,r.kt)("inlineCode",{parentName:"p"},"projectId")," to sign requests. You\u2019ll need to add the key ",(0,r.kt)("inlineCode",{parentName:"p"},"x-bluedot-api-key")," with the ",(0,r.kt)("inlineCode",{parentName:"p"},"projectId")," as the value in request\u2019s headers as shown below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"x-bluedot-api-key": "<YOUR_PROJECT_ID>"\n')),(0,r.kt)("p",null,"You can find your ",(0,r.kt)("inlineCode",{parentName:"p"},"projectId")," in the ",(0,r.kt)("a",{parentName:"p",href:"/Canvas/Overview"},"Canvas")," in the Account section."),(0,r.kt)("h3",{id:"request-payload"},"Request Payload"),(0,r.kt)("h4",{id:"simple-example"},"Simple Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "destinationId": "your_zone_destinationId"\n}\n')),(0,r.kt)("h4",{id:"enriched-data-example"},"Enriched Data Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "destinationId": "melbourne_store_001",\n  "customEventMetaData": {\n    "userId": "your_user_id",\n    "storeId": "your_store_id"\n  },\n  "location": {\n    "longitude": 144.123123123,\n    "latitude": -33.123123123,\n    "horizontalAccuracy": 12.232323,\n    "bearing": 123,\n    "speed": 2\n  },\n  "eventTime": "2018-09-02T00:08:16.000Z"\n}\n')),(0,r.kt)("h2",{id:"using-wave-api-with-hello-screens"},"Using Wave API with Hello Screens"),(0,r.kt)("p",null,"The Wave Events can also inform Hello Screens of the arrival of a customer to a Zone. You just need to add the ",(0,r.kt)("inlineCode",{parentName:"p"},"OrderId")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"customEventMetaData")," as shown below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "destinationId": "melbourne_store_001",\n  "customEventMetaData": {\n    "OrderId": "aslkfiowae"\n  }\n}\n')),(0,r.kt)("p",null,"We also recommend using the other properties the Hello Screens provides, such as adding the customer\u2019s name and any additional relevant information for your use case. The fields that have the prefix ",(0,r.kt)("inlineCode",{parentName:"p"},"hs_"),"\xa0will be displayed in the Order\u2019s details."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "destinationId": "melbourne_store_001",\n  "customEventMetaData": {\n    "OrderId": "aslkfiowae",\n    "hs_Customer Name": "James",\n    "hs_Car Model": "Honda Civic",\n    "hs_Car Color": "Red",\n    "hs_Loyalty ID": "ABC123",\n    "hs_Mobile Number": "3231234567"\n  }\n}\n')),(0,r.kt)("h3",{id:"updating-the-orders-state-in-hello-screens"},"Updating the order\u2019s state in Hello Screens"),(0,r.kt)("p",null,"To update the state of order in Hello Screens with Wave API, you\u2019ll need to include the property ",(0,r.kt)("inlineCode",{parentName:"p"},"eventType"),"\xa0in the Custom Event Meta Data. There are three main values to pass in\xa0",(0,r.kt)("inlineCode",{parentName:"p"},"eventType")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Event Type")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"onTheWay")),(0,r.kt)("td",{parentName:"tr",align:null},'Updates the order\u2019s state in Hello Screens to "On the way".')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"arrival")),(0,r.kt)("td",{parentName:"tr",align:null},'Updates the order\u2019s state in Hello Screens to "Customer Arrived". For example, when the user presses the "I\'m here" button.')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"updateOrder")),(0,r.kt)("td",{parentName:"tr",align:null},"Allows adding extra information about the order without impacting the order\u2019s state. Only affects the fields with the ",(0,r.kt)("inlineCode",{parentName:"td"},"hs_prefix")," . This might be useful when you get additional information after the customer has already started his journey to collect the order.")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ \n  "destinationId": "melbourne_store_001", \n  "customEventMetaData": { \n    "OrderId": "aslkfiowae",\n    "hs_Customer Name": "James",\n    "eventType": "onTheWay"\n  } \n}\n')),(0,r.kt)("h2",{id:"integrate-wave-in-your-web-page-using-the-web-sdk"},"Integrate Wave in your Web page using the Web SDK"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/Web%20SDK/Quick%20Start"},"Quick start and initialization")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/Web%20SDK/Send%20your%20first%20Wave"},"Send your first Wave"))))}h.isMDXComponent=!0}}]);